{"version":3,"sources":["../../../../../can/ref/ref.js"],"names":["connect","require","getIdProps","WeakReferenceMap","Observation","constructorStore","define","makeRef","connection","idProp","Ref","id","value","store","has","get","Map","_value","hydrateInstance","requests","count","_requestInstances","addReference","type","ref","defs","promise","Promise","resolve","props","_state","lastSet","then","reason","undefined","catch","set","prototype","unobservedId","ignore","isResolved","isRejected","isPending","serialize","baseEventSetup","_eventSetup","apply","arguments","baseTeardown","_eventTeardown","deleteReference","on","module","exports","behavior","baseConnection","init"],"mappings":"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","file":"ref.js"}